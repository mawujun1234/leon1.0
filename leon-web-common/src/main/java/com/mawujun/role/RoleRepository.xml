<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!-- mawujun qq:16064988 e-mail:16064988@qq.com 承接各种项目 -->
<!-- 注意文件名称为:Example_${DbName}_Mapper.xml-->
<mapper namespace="com.mawujun.role.RoleRepository">
	<select id="queryByRole" resultType="com.mawujun.role.Role" parameterType="map">
    	SELECT a.*
	    FROM leon_Role a,leon_role_role b
		where a.id=b.current_id and b.other_id=#{otherId} and b.roleRoleEnum=#{roleRoleEnum}
		order by a.id
    </select>
	
	<!--用于FilterInvocationSecurityMetadataSourceImpl-->
	<select id="queryRoleUrl" resultType="record">
    	SELECT a.url,b.role_Id
	    FROM leon_Fun a,leon_Role_Fun b
		where a.id=b.fun_id
		order by a.id
    </select>
    
    
    <select id="queryFun" resultType="com.mawujun.role.RoleFunVO" parameterType="map">
    	SELECT a.*,case when b.fun_id is null then 'N' else 'Y' end as active
    	FROM leon_Fun a left join leon_Role_Fun b
		on a.id=b.fun_id
		and b.role_id=#{role_id}
    </select>
    <!-- 
    <select id="queryFun_count" resultType="Integer" parameterType="map">
    	SELECT count(*)
    	FROM leon_Fun a left join leon_Role_Fun b
		on a.id=b.fun_id
		where b.role_id=#{role_id}
    </select>
 -->
</mapper>