<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!-- mawujun qq:16064988 e-mail:16064988@qq.com 承接各种项目 -->
<!-- 注意文件名称为:Example_${DbName}_Mapper.xml-->
<mapper namespace="com.mawujun.parameter">
	<!-- 查询各个主体拥有的参数 ============================================  -->
	<select id="query_SYSTEM" resultType="com.mawujun.parameter.ParameterSubjectVO" >
    	select '系统' as subjectName,a.* from leon_parameter_subject a where parameterId=#{parameterId} and subjectType=#{subjectType}
    </select>
    
    <select id="query_USER" resultType="com.mawujun.parameter.ParameterSubjectVO" >
    	select b.name as subjectName,a.* from leon_parameter_subject a ,LEON_USER b
    	where a.subjectId=b.id and parameterId=#{parameterId} and subjectType=#{subjectType}
    </select>
	<!-- 查询各个主体拥有的参数 =============================================================================================== -->
	
	<!-- 查询用户所属的职位，组织单元，用户组，角色============================================  -->
	<select id="query_USER_part_of" resultType="record" >
    	select distinct 'GROUP' AS subjecttype,group_id as SUBJECTID from leon_group_user where user_id=#{userId}
    	UNION ALL
    	select distinct 'ROLE' AS subjecttype,ROLE_id  as SUBJECTID from leon_user_role where user_id=#{userId}
    </select>
	
	<!-- ========================================================== -->
</mapper>