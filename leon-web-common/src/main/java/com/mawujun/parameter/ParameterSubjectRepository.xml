<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!-- mawujun qq:16064988 e-mail:16064988@qq.com 承接各种项目 -->
<!-- 注意文件名称为:Example_${DbName}_Mapper.xml-->
<mapper namespace="com.mawujun.parameter.ParameterSubject">
	<!-- 查询各个主体拥有的参数 ============================================  -->
	<select id="query_SYSTEM" resultType="com.mawujun.parameter.ParameterSubjectVO" >
    	select '系统' as subjectName,a.* from leon_parameter_subject a where parameter_Id=#{parameter_Id} and subjectType=#{subjectType}
    </select>
    
    <select id="query_USER" resultType="com.mawujun.parameter.ParameterSubjectVO" >
    	select b.name as subjectName,a.* from leon_parameter_subject a ,LEON_USER b
    	where a.SUBJECT_ID=b.id and parameter_Id=#{parameter_Id} and subjectType=#{subjectType}
    </select>
    
     <select id="query_GROUP" resultType="com.mawujun.parameter.ParameterSubjectVO" >
    	select b.name as subjectName,a.* from leon_parameter_subject a ,LEON_group b
    	where a.SUBJECT_ID=b.id and parameter_Id=#{parameter_Id} and subjectType=#{subjectType}
    </select>
    
     <select id="query_ROLE" resultType="com.mawujun.parameter.ParameterSubjectVO" >
    	select b.name as subjectName,a.* from leon_parameter_subject a ,LEON_role b
    	where a.SUBJECT_ID=b.id and parameter_Id=#{parameter_Id} and subjectType=#{subjectType}
    </select>
	<!-- 查询各个主体拥有的参数 =============================================================================================== -->
	
	<!-- 查询用户所属的职位，组织单元，用户组，角色============================================  -->
	<select id="query_USER_part_of" resultType="record" parameterType="map" >
		select b.parametervalue from (
    	select distinct '1' AS order1,group_id as SUBJECT_ID from leon_group_user where user_id=#{user_Id}
    	UNION ALL
    	select distinct '2' AS order1,ROLE_id  as SUBJECT_ID from leon_user_role where user_id=#{user_Id}
    	) a, LEON_PARAMETER_SUBJECT b
    	where a.SUBJECT_ID=b.SUBJECT_ID and b.parameterid=#{parameter_Id}
    	order by a.order1
    </select>
	
	<!-- ========================================================== -->
</mapper>