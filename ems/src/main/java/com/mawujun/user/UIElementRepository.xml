<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<!-- mawujun qq:16064988 e-mail:16064988@qq.com-->
<mapper namespace="com.mawujun.user.UIElementRepository">
	
    <select id="queryByFunRole" resultType="com.mawujun.user.UIElementVO" parameterType="map">
    	select a.*,decode(b.uIElement_id,null,'N','Y') selected from sys_uielement a left join sys_uielement_funrole b
    	on a.id=b.uIElement_id 
    	and b.funrole_id=#{funRole_id} where a.navigation_id=#{navigation_id}
    </select> 
  
  <select id="queryElement" resultType="string"  parameterType="map">
  	select b.code from sys_navigation a,sys_uielement b,sys_uielement_funrole c,sys_funrole_user d
	where a.id=b.NAVIGATION_ID and b.id=c.UIELEMENT_ID and c.FUNROLE_ID=d.FUNROLE_ID and a.link=#{jsp_url}
	and d.USER_ID=#{user_id}

  </select>
</mapper>

